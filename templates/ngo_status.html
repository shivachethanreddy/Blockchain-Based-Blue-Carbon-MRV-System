{% extends 'base.html' %}
{% block title %}Application Status - NGO/Panchayat{% endblock %}
{% block content %}
	<div class="status-container">
		<h2 class="page-title">Application Status</h2>
		<div class="status-info">
			<p>Organization: <strong>{{ ngo.org_name }}</strong></p>
			<p>Project: <strong>{{ ngo.project_title }}</strong></p>
			<p>Type: <strong>{{ ngo.org_type }}</strong></p>
		</div>
		
		<div class="status-boxes">
			<!-- Accepted Status Box -->
			<div class="status-box {% if ngo.status == 'accepted' %}active{% endif %}">
				<div class="status-indicator accepted"></div>
				<div class="status-content">
					<h3>Accepted</h3>
					<p>Your application has been approved by NCCR</p>
					{% if ngo.status == 'accepted' %}
						<div class="status-message success">
							<p><strong>Congratulations!</strong> Your NGO/Panchayat application has been accepted.</p>
							<p>You can now proceed to the NCCR portal to continue with your project.</p>
						</div>
						{% if ngo.session_token %}
							<button class="btn btn-primary" onclick="window.location.href='{{ url_for('ngo_dashboard', ngo_id=ngo.id, session_id=ngo.session_token) }}';">
								Continue to Portal
							</button>
						{% else %}
							<a href="{{ url_for('ngo_login') }}" class="btn btn-primary">Login to Continue</a>
						{% endif %}
					{% endif %}
				</div>
			</div>

			<!-- Pending Status Box -->
			<div class="status-box {% if ngo.status == 'pending' %}active{% endif %}">
				<div class="status-indicator pending"></div>
				<div class="status-content">
					<h3>Pending</h3>
					<p>Your application is under review</p>
					{% if ngo.status == 'pending' %}
						<div class="status-message warning">
							<p><strong>Verification is still pending.</strong></p>
							<p>Our team is reviewing your application and documents. You will be notified once the review is complete.</p>
						</div>
						<button class="btn btn-secondary" onclick="window.location.href='{{ url_for('ngo_status', ngo_id=ngo.id) }}';">
							Refresh Status
						</button>
					{% endif %}
				</div>
			</div>

			<!-- Declined Status Box -->
			<div class="status-box {% if ngo.status == 'declined' %}active{% endif %}">
				<div class="status-indicator declined"></div>
				<div class="status-content">
					<h3>Declined</h3>
					<p>Your application was not approved</p>
					{% if ngo.status == 'declined' %}
						<div class="status-message error">
							<p><strong>Application Declined</strong></p>
							<p>Unfortunately, your application did not meet the required criteria. Please review the requirements and consider reapplying.</p>
						</div>
						<a href="{{ url_for('ngo_register') }}" class="btn btn-primary">Reapply</a>
						<a href="{{ url_for('index') }}" class="btn btn-outline">Return to Home</a>
					{% endif %}
				</div>
			</div>
		</div>

		<!-- Additional Info for Pending Status -->
		{% if ngo.status == 'pending' %}
		<div class="status-timeline">
			<h3>Application Timeline</h3>
			<div class="timeline">
				<div class="timeline-item completed">
					<div class="timeline-marker"></div>
					<div class="timeline-content">
						<h4>Application Submitted</h4>
						<p>Your application has been successfully submitted</p>
					</div>
				</div>
				<div class="timeline-item current">
					<div class="timeline-marker"></div>
					<div class="timeline-content">
						<h4>Under Review</h4>
						<p>NCCR team is reviewing your documents and application</p>
					</div>
				</div>
				<div class="timeline-item">
					<div class="timeline-marker"></div>
					<div class="timeline-content">
						<h4>Decision</h4>
						<p>You will be notified of the final decision</p>
					</div>
				</div>
			</div>
		</div>
		{% endif %}
	</div>
{% endblock %}
